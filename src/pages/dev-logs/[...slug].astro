---
import { getCollection } from "astro:content";
import ProseLayout from "~/layout/prose.astro";
import H1 from "~/lib/mdx/h1.astro";
import H2 from "~/lib/mdx/h2.astro";
import H3 from "~/lib/mdx/h3.astro";
import P from "~/lib/mdx/p.astro";
import EM from "~/lib/mdx/em.astro";
import Fluid from "~/lib/mdx/fluid.tsx";
import Label from "~/lib/mdx/label.tsx";

export async function getStaticPaths() {
	const devLogEntries = await getCollection("dev-logs");
	return devLogEntries.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<ProseLayout title={entry.data.title}>
	<Content
		components={{
			h1: H1,
			h2: H2,
			h3: H3,
			p: P,
			em: EM,
			Fluid: Fluid,
			Label: Label,
		}}
	/>
</ProseLayout>
